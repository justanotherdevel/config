"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getImportPath = exports.getImportRegExp = exports.getDirname = exports.uniq = void 0;
var path_1 = require("path");
function uniq(things) {
    return Array.from(new Set(things));
}
exports.uniq = uniq;
function getDirname(document) {
    return path_1.dirname(document.uri).replace(/^file:\/\//, "");
}
exports.getDirname = getDirname;
function getImportRegExp(key) {
    var file = "(.+\\.\\S{1,2}ss)";
    var fromOrRequire = "(?:from\\s+|=\\s+require(?:<any>)?\\()";
    var requireEndOptional = "\\)?";
    var pattern = "\\s+" + key + "\\s+" + fromOrRequire + "[\"']" + file + "[\"']" + requireEndOptional;
    return new RegExp(pattern);
}
exports.getImportRegExp = getImportRegExp;
function getImportPath(document, importName) {
    var folder = getDirname(document);
    var match = document.getText().match(getImportRegExp(importName));
    var fileName = (match === null || match === void 0 ? void 0 : match[1]) || "";
    if (!fileName) {
        return "";
    }
    return path_1.join(folder, fileName);
}
exports.getImportPath = getImportPath;
//# sourceMappingURL=utils.js.map